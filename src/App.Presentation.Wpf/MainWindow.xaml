<Window x:Class="App.Presentation.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Multi-Camera 120 FPS System (Production-Grade Skeleton)" Height="720" Width="1200"
        WindowStartupLocation="CenterScreen">
    <DockPanel>
        <Border DockPanel.Dock="Top" Padding="12" Background="#111">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Vertical">
                    <TextBlock Foreground="White" FontSize="18" FontWeight="SemiBold"
                               Text="Multi-Camera 120 FPS System — Architecture Skeleton" />
                    <TextBlock Foreground="#BFBFBF" FontSize="12"
                               Text="UI never talks to camera SDKs. Frames flow through HAL → pipelines → hub → MVVM." />
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Content="Start" Width="110" Margin="0,0,8,0" Command="{Binding StartCommand}" />
                    <Button Content="Stop" Width="110" Command="{Binding StopCommand}" />
                </StackPanel>
            </Grid>
        </Border>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding Cameras}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="12" Padding="10" BorderThickness="1" BorderBrush="#333" CornerRadius="6">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <DockPanel>
                                    <TextBlock FontSize="14" FontWeight="SemiBold" Text="{Binding Title}" />
                                    <TextBlock Margin="10,0,0,0" Foreground="#666" Text="{Binding Subtitle}" />
                                </DockPanel>

                                <Border Grid.Row="1" Margin="0,10,0,10" Background="#000" CornerRadius="4">
                                    <Image Stretch="Uniform" Source="{Binding Preview}" RenderOptions.BitmapScalingMode="NearestNeighbor"/>
                                </Border>

                                <Grid Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Foreground="#333" Text="FPS: " />
                                        <TextBlock FontWeight="SemiBold" Text="{Binding FpsText}" />
                                        <TextBlock Margin="14,0,0,0" Foreground="#333" Text="Worst Δt: " />
                                        <TextBlock FontWeight="SemiBold" Text="{Binding WorstDeltaText}" />
                                        <TextBlock Margin="14,0,0,0" Foreground="#333" Text="Drops: " />
                                        <TextBlock FontWeight="SemiBold" Text="{Binding DropsText}" />
                                    </StackPanel>

                                    <Border Grid.Column="1" Padding="8,2" CornerRadius="10" Background="{Binding HealthBrush}" VerticalAlignment="Center">
                                        <TextBlock Foreground="White" FontSize="12" Text="{Binding HealthText}" />
                                    </Border>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </DockPanel>
</Window>
